{#  -*- coding: utf-8 -*- #}
{% import 'index_helper.tmpl' as helper with context %}
{% import 'comments_helper.tmpl' as comments with context %}
{% extends 'base.tmpl' %}

{% block extra_head %}
    {{ super() }}
    {% if posts and (permalink == '/' or permalink == '/' + index_file) %}
        <link rel="prefetch" href="{{ posts[0].permalink() }}" type="text/html">
    {% endif %}
{% endblock %}

{% block content %}
{% block content_header %}{% endblock %}
<h2 class="title is-2">О проекте</h2>
{{ blog_about }}<br/>
<h3 class="title is-3">Полезные материалы</h3>
<table class="table is-striped">
  <tbody>
    {% for item in content_pinned_articles %}
    <tr>
        <td class="is-hidden-mobile">{{ item.type }}</td>
        <td><a class="is-info" href="{{ item.link }}">{{ item.title }}</a></td>
        <td class="has-text-right is-hidden-mobile">{{ item.date }}</td>
    </tr>
    {% endfor %}
  </tbody>
</table>

<div class="postindex">
{% for post in posts %}
    <article class="blog-post">
    <header>
        <h2 class="blog-post-title"><a href="{{ post.permalink() }}" class="u-url">{{ post.title()|e }}</a></h2>
        <div class="blog-post-meta">
            <p class="byline author vcard"><span class="byline-name fn">{{ post.author() }}</span></p>
            <p class="dateline"><a href="{{ post.permalink() }}" rel="bookmark"><time class="published dt-published" datetime="{{ post.date.isoformat() }}" title="{{ post.formatted_date(date_format) }}">{{ post.formatted_date(date_format) }}</time></a></p>
        </div>
    </header>
    {% if index_teasers %}
    <div class="p-summary entry-summary">
    {{ post.text(teaser_only=True) }}
    {% else %}
    <div class="e-content entry-content">
    {{ post.text(teaser_only=False) }}
    {% endif %}
    </div>
    {% if not post.meta('nocomments') and site_has_comments %}
    <p class="commentline">{{ comments.comment_link(post.permalink(), post._base_path) }}
    {% endif %}
    </article>
{% endfor %}
</div>
{{ helper.html_pager() }}
{{ comments.comment_link_script() }}
{{ helper.mathjax_script(posts) }}
{% endblock %}
