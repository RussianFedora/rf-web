.. title: Debian переходит на Pagure
.. slug: debian-perekhodit-na-pagure
.. date: 2017-06-19 17:38:26 UTC+03:00
.. tags: debian, pagure, gitlab, gitolite, gogs, kallithea, git
.. category: 
.. link: 
.. description: 
.. type: text
.. author: Peter Lemenkov

Опять хорошие новости от проекта Debian! Участники проекта `планируют
отказаться от устаревшего SourceForge-подобного сервиса, Alioth
<https://lists.debian.org/debian-devel-announce/2017/06/msg00002.html>`_,
полностью перейдя на Git и переведя хостинг кода на `Pagure
<https://pagure.io/>`_. Мы вам о нем `уже рассказывали </content/pagureio/>`_ -
это разработка нашего коммьюнити, предназначенная для Git-хостинга.

Всем было понятно, что нужно переходить, но потенциальных целей для миграции
хватало, и процесс обсуждения был непрост. Очевидным первым кандидатом был
GitLab, но быстро сошел с дистанции из-за модели `Open Core
<https://ru.wikipedia.org/wiki/Open_core>`_ и большого количества зависимостей.

Были и `еще кандидаты <https://wiki.debian.org/Alioth/GitNext>`_, но все они
были отвергнуты. `Gogs <https://gogs.io>`_ был отвергнут, т.к. плохо
масштабируется, и в ходе проверок были обнаружены неназванные проблемы с
безопасностью. Gitolite не подошел из-за чрезмерной простоты. `Gitblit
<http://gitblit.com>`_ - из-за того, что написан на Java. А `Kallithea
<https://kallithea-scm.org>`_ не позволяет работать git по ssh (хотя есть `Pull
Request с этой функциональностью
<https://bitbucket.org/conservancy/kallithea/pull-requests/311/ssh-v8/diff>`_).
В конце обсуждений было решено, что Pagure, это оптимальный вариант.

Первая проблема, которую начали решать, это не-git репозитории. 90%
репозиториев Debian, это Git, а вот остальные, это Subversion, Mercurial,
Bazaar, Darcs и даже CVS. К счастью, почти все пользователи не-git репозиториев
признались, что либо уже используют Git (например, через плагин), либо
переходят на него. С теми, кто не захочет переходить, будут решать вопрос
отдельно. Например, можно оставить собственно доступ к репозиторию, но у него
уже не будет web-интерфейса.

Следующая проблема, это зависимости Pagure. Когда проверяли разные варианты
хостинг-платформ, то для GitLab удалось включить все зависимости в Debian, и
даже оформить пакет. А для Pagure так до сих пор и не собрано deb-пакета. Но
это решаемо.

Еще одной проблемой оказались списки рассылки. В Alioth используется Mailman,
интегрированный с самой платформой. Ни Pagure, ни GitLab не предлагают
интегрированного решения. Интересно, что в других сервисах Debian используется
Smartlist или другая версия Mailman, так что тут все равно придется наводить
порядок. Тут придется думать, т.к. просто эту задачу не решить. Но не
оставаться на устаревшем Alioth из-за этого?

В качестве управления пользователями рассматривается FreeIPA, но тут еще ничего
не определено.

Мы очень рады за участников Debian, которые последовательно идут по пути
унификации не только дистрибутивов, но и инфраструктуры (например, `они
используют fedmsg </content/Короткие-новости-22/>`_).

Прямо сейчас Fedora Project тоже переходит на Pagure, хотя и не очень
торопится. Тем не менее, проект уже `заменил FedoraHosted.org
</posts/novosti-nashei-infrastruktury/>`_, багтрекер нашей инфраструктуры на
базе Trac, и много чего еще. Можно ожидать перевода на Pagure и всей прочей
инфраструктуры.
