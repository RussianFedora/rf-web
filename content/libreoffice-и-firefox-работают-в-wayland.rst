.. title: LibreOffice и Firefox работают в Wayland.
.. slug: libreoffice-и-firefox-работают-в-wayland
.. date: 2015-07-20 16:09:22
.. tags:
.. category:
.. link:
.. description:
.. type: text
.. author: Peter Lemenkov

**Это архивная статья**


Новостей о Wayland не было довольно давно. В целом, понятно почему -
протокол утрясли, референсные реализации есть, и теперь из новостей
можно ожидать лишь то, как его поддержку реализовывают в библиотеках. И
в Qt, и в GTK поддержку уже добавили, и из новостей тут можно накопать
лишь логи коммитов. Но остался один большой слон в лавке.

Перевод Qt на Wayland получился сравнительно быстрым. Честно говоря,
непонятно, как поведут себя приложения - тут надо смотреть, и этот год
все покажет, но формально все закончено (реализовано в Qt5). А вот с GTK
ситуация была похуже. Во-1, как оказалось, в версии GTK2 его
кроссплатформенность - липовая, и серьезное приложение было вынуждено
использовать платформо-специфичные вызовы для каждой платформы. Переход
на GTK3, в котором эту проблему обещали решить, давался приложениям
порой настолько тяжело, что некоторые предпочли перейти на Qt (как,
например,
`Wireshark </content/libreoffice-медленно-переходит-на-gtk3>`__). А во-2
порочная практика, которой придерживались большие приложения, когда ради
кроссплатформенности наворачивают настолько сложный тулкит, слегка
основанный на GTK, что вообще непонятно, как с ними быть. Так
спроектировали, к примеру, LibreOffice и Firefox.

Реализовывать поддержку Wayland в ветке GTK2 никто не взялся, и
единственным вариантом для GTK2-приложений была работа под
X11-прослойкой для Wayland (XWayland). Ну или гораздо более сложный, но
архитектурно правильно выглядящий, процесс перехода на GTK3. Оба
приложения - `Firefox </content/firefox-медленно-переходит-на-gtk3>`__ и
`LibreOffice </content/libreoffice-медленно-переходит-на-gtk3>`__
выбрали обновление до GTK3. Поразительно, но результат не заставил себя
ждать!
На днях `Jiří
Eischmann <https://fedoraproject.org/wiki/User:Eischmann>`__ объявил в
своей ленте Google+, что `Firefox нативно работает в
Wayland <https://plus.google.com/112174839778779720402/posts/BB586bhiyKH>`__.

Коллеги-аналитики сразу же скептически заметили, что Jiří не показал
скриншот, что может означать "запускается", а не "работает", но даже
так, это серьезное достижение!
В отличие от несколько поспешного анонса от Jiří, другой наш коллега,
`Caolán McNamara <http://www.ohloh.net/accounts/caolan>`__, подошел к
делу основательнее. В его объявлении о том, что `LibreOffice работает в
Wayland <http://caolanm.blogspot.com/2015/07/libreoffice-on-wayland.html>`__,
есть скриншот! Коллеги-аналитики сразу же скептически заметили, что
Caolán не показал скринкаст, что может означать "запускается", а не
"работает", но даже так, это серьезное достижение!
|image0|
**LibreOffice в Wayland**
Из других новостей - инженер Red Hat, `Leo
Ufimttsev <https://ca.linkedin.com/pub/leo-ufimtsev/31/201/55>`__, ведет
работу по переводу Eclipse на GTK3, и заодно `начал работу по запуску
его в
Wayland <https://plus.google.com/+LeoUfimtsev/posts/VsgP1kEmE7Y>`__.

Пожелаем удачи соотечественнику!

.. |image0| image:: https://2.bp.blogspot.com/-NQCynqSyvgA/VakMSd8a-hI/AAAAAAAABZ0/bucLRBXIRG4/Screenshot%2Bfrom%2B2015-07-17%2B15-03-52.png
   :target: https://2.bp.blogspot.com/-NQCynqSyvgA/VakMSd8a-hI/AAAAAAAABZ0/bucLRBXIRG4/Screenshot%2Bfrom%2B2015-07-17%2B15-03-52.png
