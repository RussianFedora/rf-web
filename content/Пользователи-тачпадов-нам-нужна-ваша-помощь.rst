.. title: Пользователи тачпадов, нам нужна ваша помощь!
.. slug: Пользователи-тачпадов-нам-нужна-ваша-помощь
.. date: 2014-07-14 14:03:31
.. tags:
.. category:
.. link:
.. description:
.. type: text
.. author: Peter Lemenkov

**Это архивная статья**


| Вниманию пользователей тачпадов, `Peter
  Hutterer <https://fedoraproject.org/wiki/User:Whot>`__, разработчик
  X.org, `просит вас о
  помощи <https://thread.gmane.org/gmane.linux.redhat.fedora.devel/197965>`__.

  Для исправления ряда проблем в libinput, библиотеке ввода-вывода
  Wayland, ему нужна информация, которую может быть получена лишь с
  физического устройства. И так как он не имеет доступа к большому
  количеству тачпадов, то один он не справится.

| Вам потребуется запустить утилиту *evemu-record* с определенными
  параметрами, затем поработать на клавиатуре, повозить мышкой, но не
  трогать тачпад. После этого произвести еще пару действий (пожалуйста,
  `прочтите письмо, что прислал Peter - там указаны точные
  инструкции <https://thread.gmane.org/gmane.linux.redhat.fedora.devel/197965>`__),
  и отослать полученные данные.

| `Инструкция на
  русском <http://paste.fedoraproject.org/117777/34180140/>`__:

::

    1. установить пакет evemu
    2. для федоры - установить конфиг для Х-ов
       # cd /etc/X11/xorg.conf.d/
       # wget http://repo.elemc.name/scripts/99-synaptics-dontgrab.conf
       перезагрузка
    3. запустить:
       $ sudo evemu-record /dev/input/event4 > palm-data.txt
    4. больше не пользоваться тачпадом, нормально пользоваться клавиатурой, мышкой, чем угодно, кроме тачпада
    5. перед завершением работы - отменяем запись по ctrl+c, проверяем, что есть данные в файле:
       $ grep -q "^E:" palm-data.txt && echo "all clear" || echo "no data"
       если данных нет, возвращаемся к пункту 3
    6. записываем данные о системе:
       $ uname -r > device-info.txt
       $ cat /sys/class/dmi/id/modalias >> device-info.txt
    7. создаем архив к отправке:
       $ tar jcf palm-data.tar.bz2 palm-data.txt device-info.txt
    8. выполняем нижеследующую строку и и используем ее "выхлоп", как тему e-mail:
       $ echo "PALMDATA: `cat /sys/class/dmi/id/product_version`"
    9. отправляем архив, сделанный в пункте 7 с темой из пункта 8 на адрес: libinputdatacollection@gmail.com

| 
| Проблема в том, что когда юзер использует только клавиатуру и мышь,
  тачпад, тем не менее, может генерировать события. Их надо отсеивать
  программно, в драйвере. Задача выглядит простой, но она усложняется
  тем, что устройств слишком много, а развивают десктопный Linux не так
  и много людей, и в основном в рамках нашего коммьюнити и нескольких
  дружественных нам компаний, организаций и коммьюнити ряда других
  дистрибутивов. Еще одной проблемой является то, что, к сожалению,
  почти треть всех пользователей десктопного Linux установила другой
  дистрибутив, в коммьюнити которого и разработка десктопа почти не
  ведется (до сих пор в основном по политическим мотивам портилось то,
  что делают наши коллеги и товарищи), и из которого багрепорты до наших
  разработчиков либо вовсе не доходят, либо доходят в искаженном виде,
  сквозь пропатченный десктопный стек. Хотя, конечно, надо отметить, что
  `и там есть несколько разработчиков, некоторые из которых дружат с
  нашими
  коллегами <https://docs.google.com/document/d/1dml8JrsGQ9j1xehbbEYJsQIOmBJGHLStcO_fdHTD2oI>`__.

  Поэтому Peter находится в состоянии постоянной нехватки информации, и
  просит вас помочь ему. К сожалению, ему требуются данные лишь с
  поддерживаемых версий Fedora - 19 и больше. Лучше, конечно, с 20й.

| Peter предупреждает, будьте внимательны - *evemu-record* записывает
  все события с указанного устройства, и если вы ошибетесь, то вполне
  возможно, что запишете весь ввод с клавиатуры, включая пароли и т.п.
  Утилита делалась очень наспех, так что не обессудьте. Что касается
  списка событий с тачпада, то Peter не знает о возможностях сделать
  что-то неприятное пользователю, зная лишь их, так что тут все выглядит
  безопасно.

