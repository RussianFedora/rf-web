.. title: Общесистемные настройки криптографии
.. slug: Общесистемные-настройки-криптографии
.. date: 2015-01-21 17:44:24
.. tags:
.. category:
.. link:
.. description:
.. type: text
.. author: Peter Lemenkov

**Это архивная статья**


Наши участники делают еще один шаг в направлении `общесистемных
крипто-политик </content/Будущие-фичи-fedora-21>`__, работа по
реализации которых начата в Fedora 21. `Nikos
Mavrogiannopoulos <https://www.openhub.net/accounts/nmav>`__, основной
разработчик криптобиблиотеки GnuTLS, `создал спецификацию на работу с
библиотеками OpenSSL и
GnuTLS <https://fedoraproject.org/wiki/Packaging:CryptoPolicies>`__,
которой должны следовать все приложения, использующие их. Расширение
спецификации на nss
`планируется <https://bugzilla.redhat.com/1157720>`__, но пока не
реализовано. Остальные криптобиблиотеки, с нашей точки зрения, лучше не
использовать. Если же разработчики их используют, то им стоит
рассмотреть переход на одну из этих трех. В будущем останется лишь одна,
но которая из них, пока непонятно.

Nikos открыл `заявки в нашей
багзилле <https://bugzilla.redhat.com/1179209>`__ на каждый пакет,
который зависит от GnuTLS или OpenSSL, и прогресс уже пошел. `Наши
участники встретили нововведение в целом
положительно <https://thread.gmane.org/gmane.linux.redhat.fedora.security/1125>`__.

Возвращаясь к трем основным библиотекам, мы бы рады сказать, что надо
прямо сейчас переходить на *%криптобиблиотека%*, но это невозможно. Все
три обладают несовпадающим набором функционала, к их upstream-командам
есть серьезные вопросы по процессу разработки, все три обладают
различными лицензиями, что не позволяет переносить функционал друг из
друга. В быту проблемы вызывают
`все </content/Политика-в-fedora-по-отношению-к-корневым-ssl-сертификатам-со-слабыми-ключами>`__
`библиотеки </content/Досмеялись-Серьезная-ошибка-в-gnutls>`__. Но
проблема еще и в том, что логика работы криптобиблиотек не всегда
понятна. Криптография, это и без того непростая область, так еще и
конкретные реализации усложняют процесс. Например, наш коллега, `Adam
Williamson <https://www.happyassassin.net/>`__, решил разобраться в
деталях того, как происходит `подключение дополнительные сертификатов в
основных
крипто-библиотеках <https://www.happyassassin.net/2015/01/14/trusting-additional-cas-in-fedora-rhel-centos-dont-append-to-etcpkitlscertsca-bundle-crt-or-etcpkitlscert-pem/>`__.

Сначала оказалось, что `хранилище сертификатов по умолчанию в разных
дистрибутивах находится в разных местах, да еще и по формату
отличается <https://www.happyassassin.net/2015/01/12/a-note-about-ssltls-trusted-certificate-stores-and-platforms/>`__
(внимание, очень длинный пост), затем оказалось, что понятие "trusted" в
OpenSSL `гораздо
сложнее <https://www.happyassassin.net/2015/01/16/openssl-trust-and-purpose/>`__,
чем кажется, и не все мэйнтейнеры понимают его правильно. Последнее
далось Адаму `особенно
тяжело <https://bugzilla.redhat.com/show_bug.cgi?id=873373#c16>`__.

