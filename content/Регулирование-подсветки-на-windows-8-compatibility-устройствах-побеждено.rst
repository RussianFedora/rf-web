.. title: Регулирование подсветки на Windows 8 compatibility устройствах побеждено
.. slug: Регулирование-подсветки-на-windows-8-compatibility-устройствах-побеждено
.. date: 2013-07-22 10:17:56
.. tags:
.. category:
.. link:
.. description:
.. type: text
.. author: i.gnatenko.brain

**Это архивная статья**


| Вчера ( 21.07.2013 ) в ядро Linux были включены несколько патчей,
  которые решают проблему регулирования подсветки на некоторых
  устройствах.

| Скоро Linus Torvalds выпустит Linux 3.11-rc2. В этой версии ядра уже
  интегрированы все патчи.

| Суть проблемы заключается в следующем:
| Windows 8 представила новую политику управления подсветкой, чтобы
  графические драйверы управляли ей.

| Эта проблема проявляется у различных поставщиков:

-  **Lenovo** - некорректное поведение
-  Некоторые **Dell** - полный отказ
-  Возможно другие

| Самое простое, что можно сделать - это отключить ACPI управление
  подсветкой, если прошивка указывает на поддержку Windows 8, но вполне
  возможно, что некоторые графические драйверы могу по-прежнему
  использовать функциональность ACPI как основную. Один из патчей легко
  отключает регулирование подсветкой через ACPI на машинах, совместимых
  с Windows 8, когда используется Intel GPU. Его можно применить для
  AMD, Nvidia и других видеокарт, но на данный момент мы не имеем
  сообщений, что там сломалось управление подсветкой.

| На данный момент ( спустя более, чем полгода ) мы интегрировали в ядро
  `4 патча <https://lkml.org/lkml/2013/7/17/718>`__:
| `Первый
  патч <https://git.kernel.org/cgit/linux/kernel/git/rafael/linux-pm.git/commit/?id=242b2287cd7f27521c8b54a4101d569e53e7a0ca>`__
  от Aaron Lu экспортирует ACPICA переменную из которой можно понять,
  считает ли BIOS, что мы совместимы с Windows 8.

| 
| `Второй
  патч <https://git.kernel.org/cgit/linux/kernel/git/rafael/linux-pm.git/commit/?id=c04c697cf1fe8f0962ccd3c2392a9b637a5307aa>`__
  от Matthew Garret инициализирует ACPI видео, даже если он не будет
  использоваться после (что необходимо для управления подсветкой на
  ноутбуках Thinkpad).

| `Третий
  патч <https://git.kernel.org/cgit/linux/kernel/git/rafael/linux-pm.git/commit/?id=8c5bd7adb2ce47e6aa39d17b2375f69b0c0aa255>`__
  реализует обходной путь для i915. Берём на себя управление подсветкой,
  если прошивка думает, что мы имеем дело с Windows 8. Данный патч
  основывается на работе нескольких разработчиков, в том числе Matthew
  Garrett, Chun-Yi Lee, Seth Forshee и Aaron Lu.

| `Последний
  патч <https://git.kernel.org/cgit/linux/kernel/git/rafael/linux-pm.git/commit/?id=efaa14c7e981bdf8d3c8d39d3ed12bdc60faabb8>`__
  от Aaron Lu заставляет нас идти вслед за Windows 8, сообщив прошивке с
  помощью метода \_DOS, что она не должна автоматически изменять яркость
  так, что яркостью было бы невозможно управлять через GUI.

