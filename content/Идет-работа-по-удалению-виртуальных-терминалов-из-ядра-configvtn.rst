.. title: Идет работа по удалению виртуальных терминалов из ядра ( CONFIG_VT=n )
.. slug: Идет-работа-по-удалению-виртуальных-терминалов-из-ядра-configvtn
.. date: 2012-08-12 15:29:19
.. tags:
.. category:
.. link:
.. description:
.. type: text
.. author: Peter Lemenkov

**Это архивная статья**


Уже почти год идет работа по удалению из ядра Linux виртуальных
терминалов в пользу аналогичного решения, работающего в userspace и
использующего KMS, udev, systemd, Mesa и gtk2/pango. Вообще, про это
начали публично говорить с начала весны 2012 года, и это уже и не
новость, но мы бы хотели проинформировать `недоумевающих читателей
других
Linux-ресурсов <https://www.opennet.ru/opennews/art.shtml?num=34547#56>`__
о том, какие изменения их ждут в ближайшее время. Заметно, что как
правило, они не интересуются новостями мира Open Source, мотивацией
мэйнтейнеров, текущими тенденциями разработки, и новости о переходе их
дистрибутивов на тот или иной современный компонент, на них сваливаются
`внезапно <https://lurkmore.to/Внезапно>`__).

Итак, участник ArchLinux `David
Herrmann <http://dvdhrm.wordpress.com/about-me/>`__ анонсировал
результаты нескольких месяцев своей работы `еще в марте 2012
года <https://thread.gmane.org/gmane.linux.serial/7828>`__. Он написал
`kmscon <https://github.com/dvdhrm/kmscon>`__, многофункциональный
аналог виртуальных консолей, работающих в пространстве ядра. Для полной
совместимости нужны были способы выбросить kernel oops куда-то, в
область, видимую системному администратору, и в июне 2012 David
`анонсировал
fblog <https://thread.gmane.org/gmane.linux.kernel/1314236>`__,
минимальный драйвер, выводящий текст на подключенные
framebuffer-устройства. Основная работа уже сделана, и остались только
улучшения и исправления ошибок. Кстати, мы уже писали, что в систему
журналирования ядра `вносятся серьезные
изменения </content/Бинарные-логи-в-ядре>`__ - похоже тема становится
очень актуальной.

Чем же kmscon лучше традиционной "ядерной" подсистемы VT? David выделяет
следующие отличительные особенности. Новый терминал полностью базируется
на KMS, что упрощает работу с Wayland, уменьшает количество переключений
режимов видеодисплея, добавляет поддержку многомониторных конфигураций и
позволяет ускорять вывод текста с помощью GPU (бинарные логи будут
теперь прокручиваться на экране еще быстрее!). Помимо этого он будет
полностью удовлетворять стандарту DEC vt510 и эмулировать xterm, в то
время, как текущая "ядерная" реализация кое-как совместима лишь с DEC
vt102. Также будет доступна многоязычность (полная поддержка UFT-8 и
нелатинских шрифтов) и улучшенное отображение шрифтов (это очень важный
вопрос - недаром он так беспокоит анонимных аналитиков при обсуждении
скриншотов рабочих столов). Благодаря `совместным разработкам с systemd
и
Wayland <https://www.phoronix.com/scan.php?page=news_item&px=MTEzMzI>`__
планируются серьезные улучшения multiseat. Автор скомпоновал `небольшой
список ЧаВо <https://github.com/dvdhrm/kmscon/wiki/FAQ>`__ и предлагает
задавать ему вопросы по теме, если остались.

Изменения будут доступны только для Linux, но автор предлагает
участникам коммьюнити вокруг других Unix самостоятельно портировать туда
KMS, fblog и kmscon. Интересно, что в ArchLinux включить его будет
непросто, т.к. текущий мэйнтейнер почему-то `собрал Mesa без поддержки
DRM для EGL <https://bugs.archlinux.org/task/30224>`__.

